(this["webpackJsonptodo-react-app"]=this["webpackJsonptodo-react-app"]||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(20),s=n.n(c),i=n(16),u=n(34),o=n(5),l=n.n(o),p=n(11),j=n(19),d=(n(82),n(130)),f=n(122),b=n(123),h=n(124),O=n(125),x=n(65),m=n.n(x),k=n(66),v=n.n(k),g=n(3),w="done",y="undone",T=function(e){var t=e.setFilter,n=function(e){return function(){return t((function(t){return Object(i.a)(Object(i.a)({},t),{},{filterType:e})}))}},r=function(e){return function(){return t((function(t){return Object(i.a)(Object(i.a)({},t),{},{sortDirection:e})}))}};return Object(g.jsx)(d.a,{mt:2,children:Object(g.jsxs)(f.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(g.jsxs)(d.a,{children:[Object(g.jsx)(b.a,{onClick:n("all"),children:"All"}),Object(g.jsx)(b.a,{onClick:n(w),children:"Done"}),Object(g.jsx)(b.a,{onClick:n(y),children:"Undone"})]}),Object(g.jsxs)(d.a,{children:[Object(g.jsx)(h.a,{display:"inline",children:"Sort by Date"}),Object(g.jsx)(O.a,{onClick:r(!0),children:Object(g.jsx)(m.a,{})}),Object(g.jsx)(O.a,{onClick:r(!1),children:Object(g.jsx)(v.a,{})})]})]})})},F=n(126),C=n(132),E=Object(F.a)((function(e){return{inputForm:{padding:[e.spacing(1),e.spacing(1)].join(" "),marginTop:e.spacing(2),width:"100%"}}})),D=function(e){var t=e.createTaskFetch,n=E(),a=Object(r.useState)(""),c=Object(j.a)(a,2),s=c[0],i=c[1],u=function(){var e=Object(p.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==n.code||!s.trim()){e.next=4;break}return e.next=3,t(s);case 3:i("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(C.a,{className:n.inputForm,type:"text",placeholder:"i want to ...",value:s,onChange:function(e){i(e.target.value)},onKeyDown:u})})},A=n(127),I=n(67),N=n.n(I),S=n(68),M=n.n(S),P=Object(F.a)((function(e){return{listItem:{borderRadius:"5px",border:"1px solid"+e.palette.grey[400],marginTop:e.spacing(1)},completed:{background:"#eaffe9",transition:"all .4s",borderColor:e.palette.success.main},hiddenInput:{width:"100px"}}})),R=function(e){var t=e.task,n=e.editTaskFetch,a=e.deleteTaskFetch,c=P(),s=Object(r.useState)(!0),i=Object(j.a)(s,2),u=i[0],o=i[1],b=function(){var e=Object(p.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.stopPropagation(),a(t.uuid);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)(A.a,{className:t.done?[c.listItem,c.completed].join(" "):c.listItem,onClick:function(e){e.stopPropagation(),o(!1)},children:Object(g.jsxs)(f.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(g.jsxs)(d.a,{children:[Object(g.jsx)(O.a,{size:"small",onClick:function(e){e.stopPropagation(),n(t.uuid,{done:!0})},className:"icon-button",children:Object(g.jsx)(N.a,{})}),u?Object(g.jsx)(h.a,{component:"span",children:t.name}):Object(g.jsx)(C.a,{autoFocus:!0,onBlur:function(){return o(!0)},onKeyDown:function(e){"Enter"===e.code&&(n(t.uuid,{name:e.target.value}),o(!0)),"Escape"===e.code&&o(!0)},defaultValue:t.name})]}),Object(g.jsxs)(d.a,{children:[Object(g.jsx)(h.a,{component:"span",children:t.createdAt.substr(0,10)}),Object(g.jsx)(O.a,{size:"small",onClick:b,className:"icon-button",children:Object(g.jsx)(M.a,{})})]})]})})},z=n(128),B=function(e){var t=e.displayedTasks,n=e.editTaskFetch,r=e.deleteTaskFetch;return Object(g.jsx)(z.a,{children:t.map((function(e){return Object(g.jsx)(R,{task:e,editTaskFetch:n,deleteTaskFetch:r},e.uuid)}))})},J=n(129),K=n(131),U=n(69),L=n(70),V=n(23),W=n.n(V),q=function(){function e(){Object(U.a)(this,e)}return Object(L.a)(e,null,[{key:"getAll",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.get("/tasks/2");case 2:if(200===(t=e.sent).status){e.next=5;break}throw Error("Failed to get the task list");case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"creat",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("/task/2",{name:t,done:!1});case 2:if(200===(n=e.sent).status){e.next=5;break}throw Error("Task not created");case 5:return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"edit",value:function(){var e=Object(p.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.patch("/task/2/".concat(t),n);case 2:if(200===(r=e.sent).status){e.next=5;break}throw Error("Data change error");case 5:return e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.delete("/task/2/".concat(t));case 2:if(204===(n=e.sent).status){e.next=5;break}throw Error("Data deletion error");case 5:return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),G=Object(F.a)((function(e){return{error:{display:"block",textAlign:"center",background:e.palette.error.light,borderRadius:"5px",padding:"8px 24px"}}})),H=function(e){var t=e.children,n=e.setError,a=e.time,c=G();return Object(r.useEffect)((function(){setTimeout((function(){n("")}),a)})),Object(g.jsx)(d.a,{p:1,children:Object(g.jsx)(h.a,{component:"span",className:c.error,children:t})})},Q=function(e){return new Date(e).getTime()},X=function(e,t){return Object(p.a)(l.a.mark((function n(){var r=arguments;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.apply(void 0,r);case 3:return n.abrupt("return",n.sent);case 6:n.prev=6,n.t0=n.catch(0),t(n.t0.message);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))};W.a.defaults.baseURL="https://todo-api-learning.herokuapp.com/v1";var Y=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),s=Object(j.a)(c,2),o=s[0],d=s[1],b=Object(r.useState)({sortDirection:!0,filterType:"all"}),O=Object(j.a)(b,2),x=O[0],m=O[1];console.log(o);var k=Object(r.useState)({page:1,limit:5}),v=Object(j.a)(k,2),F=v[0],C=v[1],E=X(Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.getAll();case 2:t=e.sent,d(t);case 4:case"end":return e.stop()}}),e)}))),a),A=X(function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.creat(t);case 2:n=e.sent,d((function(e){return[].concat(Object(u.a)(e),[n])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a),I=X(function(){var e=Object(p.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.edit(t,n);case 2:r=e.sent,d((function(e){var n=e.filter((function(e){return e.uuid!==t}));return n.push(r),n}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a),N=X(function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.delete(t);case 2:d((function(e){return Object(u.a)(e).filter((function(e){return e.uuid!==t}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a);Object(r.useEffect)((function(){E()}),[E]);var S=function(e,t){var n=Object(r.useMemo)((function(){return Object(u.a)(e).sort((function(e,n){return t.sortDirection?Q(n.createdAt)-Q(e.createdAt):Q(e.createdAt)-Q(n.createdAt)}))}),[e,t.sortDirection]);return Object(r.useMemo)((function(){switch(t.filterType){case w:return n.filter((function(e){return e.done}));case y:return n.filter((function(e){return!e.done}));default:return n}}),[n,t.filterType])}(o,x);Object(r.useEffect)((function(){C((function(e){return Object(i.a)(Object(i.a)({},e),{},{page:1})}))}),[x]);var M=Object(r.useMemo)((function(){return S.slice((F.page-1)*F.limit,(F.page-1)*F.limit+F.limit)}),[S,F]);return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(f.a,{container:!0,alignItems:"center",justifyContent:"center",className:"gridContainer",children:Object(g.jsx)(J.a,{maxWidth:"sm",children:Object(g.jsxs)(f.a,{container:!0,direction:"column",children:[n&&Object(g.jsx)(H,{time:2e3,setError:a,children:n}),Object(g.jsx)(h.a,{variant:"h4",component:"h1",align:"center",children:"ToDo"}),Object(g.jsx)(D,{setTasks:d,createTaskFetch:A}),Object(g.jsx)(T,{setFilter:m}),Object(g.jsx)(B,{displayedTasks:M,deleteTaskFetch:N,editTaskFetch:I}),Object(g.jsx)(K.a,{count:Math.ceil(S.length/F.limit),onChange:function(e,t){return C((function(e){return Object(i.a)(Object(i.a)({},e),{},{page:t})}))},page:F.page,className:"todo-pagination"})]})})})})};s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(Y,{})}),document.getElementById("root"))},82:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.157aa4a3.chunk.js.map